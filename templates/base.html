<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  
  <!--Font-->
  <link href="https://fonts.googleapis.com/css?family=Rokkitt" rel="stylesheet">
  
  <!--bootstrap-->
  <link rel="stylesheet" href="{{url_for('static', filename='css/bootstrap.css')}}">
  
  <!--jquery ui-->
  <link rel="stylesheet" href="//code.jquery.com/ui/1.12.1/themes/base/jquery-ui.css">
  
  <!--font awesome-->
  <link href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-wvfXpqpZZVQGK6TAh5PVlGOfQNHSoD2xbE+QkPxCAFlNEevoEH3Sl0sibVcOQVnN" crossorigin="anonymous">
  
  <!--custom css-->
  <link rel="stylesheet" href="{{url_for('static', filename='css/style.css')}}" type="text/css" />
  <link rel="stylesheet" href="{{url_for('static', filename='css/land_positions.css')}}" type="text/css"/>
  <link rel="stylesheet" href="{{url_for('static', filename='css/sea_positions.css')}}" type="text/css"/>
  



  <title>Diplomacy</title>
</head>

<body>
  <main role="main" class="container">
    <div class="row">
      <div class="col-md-8">
        <div class="container board-image">
          
          <!-- Board -->
          {% block board %}
          {% endblock %}
        
          <!-- Flash Messages -->
          {% with messages = get_flashed_messages(with_categories=true) %}
          {% if messages %}
          {% for category, message in messages %}
          <div class="alert alert-{{ category }}">
            {{ message }}
          </div>
          {% endfor %}
          {% endif %}
          {% endwith %}
          
        </div>
        
        <!-- Button trigger modal -->
        <button type="button" class="btn btn-primary" data-toggle="modal" data-target="#intefaceModal">
          Menu
        </button>

        <!-- Modal -->
        <div class="modal fade" id="intefaceModal" tabindex="-1" role="dialog" aria-labelledby="intefaceModalLabel" aria-hidden="true">
          
          <div class="modal-dialog" role="document">
            <div id="draggable" class="modal-content page box">
            
              
              
              <!-- Modal Header -->
              <div class="modal-header">
                <div role="tabpanel">
                  
                  <!-- Nav tabs -->
                  <ul class="nav nav-tabs" role="tablist">
                    <div class="row">
                      <!-- Tab Buttons -->
                    
                    
                    
                    <!-- if logged in -->
                    {% if not user %}
                    <!--registration tab -->
            
                    
                    <li role="presentation" class="{% if not session['username'] %} active {% endif %} nav-tab-button-style">
                      <a href="#registrationTab" aria-controls="registrationTab" role="tab" data-toggle="tab">
                        <h5 class="modal-title" id="intefaceModalLabel">Register</h5>
                      </a>
                    </li>
                    <span> | </span>
                    
                    <!--log in tab -->
                    <li role="presentation" class ="nav-tab-button-style">
                      <a href="#loginTab" aria-controls="loginTab" role="tab" data-toggle="tab">
                        <h5 class="modal-title" id="intefaceModalLabel">Login</h5>
                      </a>
                    </li>
                    
                    {% else %}
                    
                    <!-- orders tab -->
                    <li role="presentation" class="{% if session['username'] %} active {% endif %} nav-tab-button-style">
                      <a href="#ordersTab" aria-controls="ordersTab" role="tab" data-toggle="tab">
                        <h5 class="modal-title" id="intefaceModalLabel">Orders</h5>
                      </a>
                    </li>
                    <span> | </span>
                    
                    <!-- messages tab -->
                    <li role="presentation" class ="nav-tab-button-style">
                      <a href="#messagesTab" aria-controls="messagesTab" role="tab" data-toggle="tab">
                        <h5 class="modal-title" id="intefaceModalLabel">Announcements</h5>
                      </a>
                    </li>
                    <span> | </span>
                    
                    <!-- log out tab -->
                    <li role="presentation" class="active nav-tab-button-style">
                      <a href="{{ url_for('logout') }}">
                        <h5 class="modal-title" id="intefaceModalLabel">Log Out</h5>
                      </a>
                    </li>
                    
                    {% endif %}
                    </div>
                  </ul>
                <!-- close modal button -->
                </div>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                  <span aria-hidden="true">&times;</span>
                </button>
              </div>
                
              <!-- Modal Body -->
              <div class="modal-body">
                
                <!-- Tab panes -->
                <div class="tab-content">
                  
                  {% if not user %}
                  
                  <!--Registration Form-->
                  <div role="tabpanel" class="tab-pane active" id="registrationTab">
                    <form method="POST" action="/register">
                      {{ registration_form.hidden_tag() }}
                      <fieldset class="form-group">
                        
                        <!-- username -->
                        <div class="form-group">
                          <i class="fa fa-user"></i> {{ registration_form.username.label(class="form-control-label") }}
                          {% if registration_form.username.errors %}
                          {{ registration_form.username(class="form-control form-control-lg is-invalid") }}
                          <div class="invalid-feedback">
                            {% for error in registration_form.username.errors %}
                            <span>{{ error }}</span>
                            {% endfor %}
                          </div>
                          {% else %}
                              {{ registration_form.username(class="form-control form-control-lg") }}
                          {% endif %}
                        </div>
                        
                        <!-- email -->
                        <div class="form-group">
                          <i class="fa fa-envelope prefix grey-text"></i> {{ registration_form.email.label(class="form-control-label") }}
                          {% if registration_form.email.errors %}
                            {{ registration_form.email(class="form-control form-control-lg is-invalid") }}
                            <div class="invalid-feedback">
                              {% for error in registration_form.email.errors %}
                              <span>{{ error }}</span>
                              {% endfor %}
                            </div>
                          {% else %}
                            {{ registration_form.email(class="form-control form-control-lg") }}
                          {% endif %}
                        </div>
                        
                        <!-- password -->
                        <div class="form-group">
                          <i class="fa fa-lock prefix grey-text"></i> {{ registration_form.password.label(class="form-control-label") }}
                          {% if registration_form.password.errors %}
                            {{ registration_form.password(class="form-control form-control-lg is-invalid") }}
                            <div class="invalid-feedback">
                              {% for error in registration_form.password.errors %}
                                <span>{{ error }}</span>
                              {% endfor %}
                            </div>
                          {% else %}
                            {{ registration_form.password(class="form-control form-control-lg") }}
                          {% endif %}
                        </div>
                        
                        <!-- password confirm -->
                        <div class="form-group">
                          {{ registration_form.confirm_password.label(class="form-control-label") }}
                          {% if registration_form.confirm_password.errors %}
                            {{ registration_form.confirm_password(class="form-control form-control-lg is-invalid") }}
                            <div class="invalid-feedback">
                              {% for error in registration_form.username.errors %}
                              <span>{{ error }}</span>
                              {% endfor %}
                            </div>
                          {% else %}
                            {{ registration_form.confirm_password(class="form-control form-control-lg") }}
                          {% endif %}
                        </div>
                      </fieldset>
                      
                      <!-- submit -->
                      <div class="form-group">
                      {{ registration_form.submit(class="btn btn-outline-info") }}
                      </div>
                    </form>
                    
                    <!-- other options -->
                    <div class="border-top pt-3"></div>
                    <small class="text-muted">
                      Already Have An Account? <a href="#registrationTab" aria-controls="registrationTab" role="tab" data-toggle="tab">Log In</a>
                    </small>
                  </div>
                  
                  
                  <!-- Login Form -->
                  <div role="tabpanel" class="tab-pane" id="loginTab">
                    <form method="POST" action="/login">
                      {{ login_form.hidden_tag() }}
                      <fieldset class="form-group">
                          
                        <!-- email -->
                        <div class="form-group">
                          <i class="fa fa-envelope prefix grey-text"></i> {{ login_form.email.label(class="form-control-label") }}
                          {% if login_form.email.errors %}
                          {{ login_form.email(class="form-control form-control-lg is-invalid") }}
                          <div class="invalid-feedback">
                            {% for error in login_form.email.errors %}
                            <span>{{ error }}</span>
                            {% endfor %}
                          </div>
                          {% else %}
                            {{ login_form.email(class="form-control form-control-lg") }}
                          {% endif %}
                        </div>
                        
                        <!-- password -->
                        <div class="form-group">
                          <i class="fa fa-lock prefix grey-text"></i> {{ login_form.password.label(class="form-control-label") }}
                          {% if login_form.password.errors %}
                          {{ login_form.password(class="form-control form-control-lg is-invalid") }}
                          <div class="invalid-feedback">
                            {% for error in login_form.password.errors %}
                            <span>{{ error }}</span>
                            {% endfor %}
                          </div>
                          {% else %}
                          {{ login_form.password(class="form-control form-control-lg") }}
                          {% endif %}
                        </div>
                        
                        <!-- remember -->
                        <div class="form-check">
                        {{ login_form.remember(class="form-check-input") }}
                        {{ login_form.remember.label(class="form-check-label") }}
                        </div>
                      </fieldset>
                      
                      <!-- submit -->
                      <div class="form-group">
                      {{ login_form.submit(class="btn btn-outline-info") }}
                      </div>
                    </form>
                    <small class="text-muted">
                      <a class="ml-2" href="#">Forgot Password?</a>
                    </small>
                    <div class="border-top pt-3"></div>
                    <small class="text-muted">
                      Need An Account? <a href="#registrationTab" aria-controls="registrationTab" role="tab" data-toggle="tab">Sign Up</a>
                    </small>
                  </div>
                  
                  
                  {% else %}
                  
                  <!-- Orders -->
                  <div role="tabpanel" class="tab-pane" id="ordersTab">
                    
                    <div id="tbl_orders"></div>
                    
                    <span><button id="create-order" class="btn btn-default">Create New Order</button></span>
                    
                    <form id='order-form'>
                      <div class="form-group">
                        <input type="text" name="order" class="form-control order-input" id="order-input">
                      </div>
                    </table>
                    

                  </div>
                  
                  <!-- Announcements -->
                  <div role="tabpanel" class="tab-pane active" id="messagesTab">
                    
                    <h5>Announcements</h5>
                    <div class="row messages-row">
                      <ul id="messages" class="messages-list">
                        {% for message in messages | reverse %}
                        <li>
                          <div class="row"><strong>{{ message['sender']|capitalize }}</strong></div>
                          <div class="row">{{message['message']}}</div>
                        </li>
                        <hr>
                        {% endfor %}
                      </ul>
                    </div>
                    <input type="text" id="myMessage" name=""/>
                    <button id="sendButton">Post</button>
                  
                  {% endif %}
                </div>
              </div>
            <div class="modal-footer">
              {% for player in players %}
                <span class="player-flag"><img class="flag" src="{{url_for('static', filename='images/')}}{{player['nation']}}.png"></img>  {{player['username']}}</span>
              {% endfor %}
            </div>
          </div>
          <div id="overlay"></div>
        </div>
      </div>
    </div>
  </main>
  
  <!-- socket js -->
  <script type="text/javascript" src="{{ url_for('static', filename='js/socketio.js') }}"></script>
  
  <!-- jquery -->
  <script src="{{ url_for('static', filename='js/jquery.min.js') }}"></script>
  
  <!--Custom JS-->
  <script type="text/javascript" src="{{ url_for('static', filename='js/orders.js') }}"></script>
  <script type="text/javascript" src="{{ url_for('static', filename='js/displayInput.js') }}"></script>
  <script type="text/javascript" src="{{ url_for('static', filename='js/messages.js') }}"></script>
  <script type="text/javascript" src="{{ url_for('static', filename='js/feedback.js') }}"></script>
  <script type="text/javascript" src="{{ url_for('static', filename='js/modal.js') }}"></script>
  <script type="text/javascript" src="{{ url_for('static', filename='js/draggable.js') }}"></script>
  <script type="text/javascript" src="{{ url_for('static', filename='js/bootstrap.js') }}"></script>
  
  <script src="https://code.jquery.com/jquery-1.12.4.js"></script>
  <script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>

    
</body>

</html>